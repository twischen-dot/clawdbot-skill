---
description: OpenCode 如何通过 clawdbot 与 Natuo 通信的方法
---

# OpenCode 与 Clawdbot 通信指南

## 概述

Clawdbot 是命令行工具，OpenCode 通过它向 Natuo 代理发送消息，实现多代理之间的信息同步。

## 工具信息

- **可执行路径**：`/opt/homebrew/bin/clawdbot`
- **目标代理**：Natuo（通过 `--agent main` 指定）

## 基本命令格式

```bash
clawdbot agent --agent main --message "<消息内容>"
```

### 构建规则

| 参数 | 值 | 说明 |
|------|-----|------|
| `--agent` | `main` | 固定指向 Natuo（main 代理） |
| `--message` | `"<消息>"` | 用户请求发送的消息内容，必须用双引号包裹 |

## 调用时机

当用户有以下请求时，你应该执行 clawdbot 通信：

- "通知 Natuo：..."
- "同步信息"
- "记录状态"
- "告诉 natuo 代理..."
- 其他类似的代理通信请求

## 执行步骤

1. **识别请求**：判断用户是否需要与 Natuo 通信
2. **提取消息**：从用户请求中提取要发送的消息内容
3. **构建命令**：`clawdbot agent --agent main --message "..."`
4. **执行命令**：运行命令
5. **返回结果**：告诉用户通信结果（成功或失败）

## 消息格式要求

- 必须用双引号包裹
- 支持中英文、空格、标点符号
- 避免特殊转义字符

## 错误处理

如果命令执行失败，检查以下原因并提供解决方案：

| 可能原因 | 检查方法 |
|---------|---------|
| clawdbot 不可用 | 检查 `/opt/homebrew/bin/clawdbot` 是否存在 |
| 代理名称错误 | 确认使用 `--agent main` |
| 消息格式问题 | 确保消息用双引号正确包裹 |
| 特殊字符冲突 | 避免消息中有转义字符 |

## 记得

- 这是 OpenCode 与 Natuo 通信的标准接口
- 不要在 skill 中包含具体业务内容
- 只负责通信方法的实现，不处理业务逻辑
- 始终验证命令执行结果